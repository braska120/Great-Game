<!DOCTYPE html>
<html>
<head>
    <title>United States Election Simulator</title>
    <style>
        #stateInfo {
            margin-top: 20px;
            font-size: 16px;
            color: #333;
        }
    </style>
</head>
<body>
    <h1>Election Simulator</h1>
    <object id="electionMap" type="image/svg+xml" data="mapofuswithstates.svg"></object>
    <div id="campaignButtons">
        <button id="campaignDemocrats">Campaign for Democrats</button>
        <button id="campaignRepublicans">Campaign for Republicans</button>
    </div>
    <div id="stateInfo"></div>

    <script>
        let isCampaignSelected = false;
        let svgDoc;

        document.getElementById('campaignDemocrats').addEventListener('click', function() {
            isCampaignSelected = true;
            document.getElementById('campaignButtons').style.display = 'none';
            enableMapInteractivity();
        });

        document.getElementById('campaignRepublicans').addEventListener('click', function() {
            isCampaignSelected = true;
            document.getElementById('campaignButtons').style.display = 'none';
            enableMapInteractivity();
        });

        document.getElementById('electionMap').addEventListener('load', function() {
            svgDoc = this.contentDocument;
            setupMapClickHandler();
        });

        function setupMapClickHandler() {
            const states = svgDoc.querySelectorAll('path');
            
            states.forEach(function(state) {
                state.addEventListener('click', function() {
                    if (!isCampaignSelected) {
                        alert("Please select a campaign first!");
                        return;
                    }
                    updateStateInfo(this.id);
                });
            });
        }

        function enableMapInteractivity() {
            // Functionality to enable map interactivity can be added here if needed
        }

        function updateStateInfo(stateId) {
            let text;
            if (stateId === "TX") {
                text = `Texas Democratic Support: 87.08%, Republican Support: 12.32%, Overall Lean: Democratic`;
            } else {
                // Fetch the full state name for other states
                const stateElement = svgDoc.querySelector(`#${stateId}`);
                const stateName = stateElement ? stateElement.getAttribute('data-name') : 'Unknown State';
                text = `You have clicked on ${stateName}`;
            }

            document.getElementById('stateInfo').textContent = text;
        }
    </script>
</body>
</html>
