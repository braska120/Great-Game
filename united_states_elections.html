<!DOCTYPE html>
<html>
<head>
    <title>United States Election Simulator</title>
    <style>
        #stateInfo {
            margin-top: 20px;
            font-size: 16px;
            color: #333;
        }
    </style>
</head>
<body>
    <h1>Election Simulator</h1>
    <object id="electionMap" type="image/svg+xml" data="mapofuswithstates.svg"></object>
    <div id="campaignButtons">
        <button id="campaignDemocrats">Campaign for Democrats</button>
        <button id="campaignRepublicans">Campaign for Republicans</button>
    </div>
    <div id="stateInfo"></div>

    <script>
        let isCampaignSelected = false;
        let selectedCampaign = "";
        let svgDoc;
        let texasData = {
            democraticSupport: 87.08, // Initial support
            republicanSupport: 12.32
        };

        document.getElementById('campaignDemocrats').addEventListener('click', function() {
            isCampaignSelected = true;
            selectedCampaign = "Democrats";
            document.getElementById('campaignButtons').style.display = 'none';
            enableMapInteractivity();
        });

        document.getElementById('campaignRepublicans').addEventListener('click', function() {
            isCampaignSelected = true;
            selectedCampaign = "Republicans";
            document.getElementById('campaignButtons').style.display = 'none';
            enableMapInteractivity();
        });

        document.getElementById('electionMap').addEventListener('load', function() {
            svgDoc = this.contentDocument;
            setupMapClickHandler();
        });

        function setupMapClickHandler() {
            const states = svgDoc.querySelectorAll('path');
            
            states.forEach(function(state) {
                state.addEventListener('click', function() {
                    if (!isCampaignSelected) {
                        alert("Please select a campaign first!");
                        return;
                    }
                    updateStateInfo(this.id);
                });
            });
        }



        function updateStateInfo(stateId) {
            let text;
            if (stateId === "TX") {
                text = `Texas Democratic Support: ${texasData.democraticSupport.toFixed(2)}%, Republican Support: ${texasData.republicanSupport.toFixed(2)}%, Overall Lean: Democratic`;
                text += `<br><button id="campaignInTexas">Campaign in Texas</button>`;
            } else {
                const stateElement = svgDoc.querySelector(`#${stateId}`);
                const stateName = stateElement ? stateElement.getAttribute('data-name') : 'Unknown State';
                text = `You have clicked on ${stateName}`;
            }

            document.getElementById('stateInfo').innerHTML = text; // Use innerHTML to include button

            // Add event listener to the new button
            const campaignButton = document.getElementById('campaignInTexas');
            if (campaignButton) {
                campaignButton.addEventListener('click', function() {
                    campaignInTexas();
                });
            }
        }

function campaignInTexas() {
    const campaignBoost = 1.5; // The amount of support to add or subtract

    if (selectedCampaign === "Democrats") {
        // Increase Democratic support and decrease Republican support
        texasData.democraticSupport = Math.min(texasData.democraticSupport + campaignBoost, 100);
        texasData.republicanSupport = Math.max(100 - texasData.democraticSupport, 0);
    } else if (selectedCampaign === "Republicans") {
        // Increase Republican support and decrease Democratic support
        texasData.republicanSupport = Math.min(texasData.republicanSupport + campaignBoost, 100);
        texasData.democraticSupport = Math.max(100 - texasData.republicanSupport, 0);
    }

    updateStateInfo('TX'); // Update the displayed info
}

    </script>
</body>
</html>
